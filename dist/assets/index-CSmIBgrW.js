(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();let a="http://127.0.0.1:3000/workexperience";const d=document.getElementById("explist");d&&u();async function u(){const o=await(await fetch(a)).json();o&&o.forEach(n=>{const r=document.createElement("li"),e=document.createElement("button");e.textContent="delete",e.className="deletebutton",r.innerHTML=`<p>Company: ${n.company} <br> Jobtitle: ${n.jobtitle} <br> Location: ${n.location}</p>`,d.appendChild(r),r.appendChild(e),e.addEventListener("click",()=>{p(n.id,r)})})}async function p(c,o){try{(await fetch(`http://127.0.0.1:3000/workexperience/${c}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?(console.log(`Deleted item with id: ${c}`),o.remove()):console.error("Failed to delete item")}catch(n){console.error("Error deleting item:",n)}}let s=document.getElementById("submit");if(s){s.addEventListener("click",o=>{o.preventDefault();const n=document.getElementById("company").value,r=document.getElementById("jobtitle").value,e=document.getElementById("location").value;c(n,r,e)});async function c(o,n,r){let e={company:o,jobtitle:n,location:r};if(o===""||n===""||r===""){let t=document.createElement("p");t.innerHTML="Please fill in all fields!",t.style.color="orange";let l=document.querySelector("article");l.innerHTML="<h1>Add a new work experience:</h1>",l.appendChild(t)}else if((await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok){document.getElementById("company").value="",document.getElementById("jobtitle").value="",document.getElementById("location").value="";let l=document.querySelector("article");l.innerHTML="<h1>Add a new work experience:</h1>";let i=document.createElement("p");i.innerHTML="Experience saved successfully!",i.style.color="orange",l.appendChild(i)}}}
